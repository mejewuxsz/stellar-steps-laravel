@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&family=Comfortaa:wght@400;500;600;700;800&family=Nunito:wght@300;400;500;600;700;800&family=Patrick+Hand&family=Quicksand:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Stellar Steps title.png glow – gold (Stellar/star) + blue/purple (Steps), brighter + blink */
@keyframes title-glow-blink {
    0%, 100% {
        filter:
            drop-shadow(0 0 10px rgba(253, 224, 71, 0.9))
            drop-shadow(0 0 22px rgba(250, 204, 21, 0.7))
            drop-shadow(0 0 34px rgba(253, 224, 71, 0.5))
            drop-shadow(0 0 32px rgba(99, 102, 241, 0.6))
            drop-shadow(0 0 44px rgba(139, 92, 246, 0.5));
    }
    50% {
        filter:
            drop-shadow(0 0 14px rgba(254, 240, 138, 1))
            drop-shadow(0 0 28px rgba(253, 224, 71, 0.9))
            drop-shadow(0 0 42px rgba(250, 204, 21, 0.7))
            drop-shadow(0 0 40px rgba(129, 140, 248, 0.8))
            drop-shadow(0 0 52px rgba(167, 139, 250, 0.6));
    }
}
.title-logo-glow {
    animation: title-glow-blink 2s ease-in-out infinite;
}

.rounded-sans {
    font-family: 'Quicksand', 'Comfortaa', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
    font-weight: 800 !important;
}

.cartoon-heading {
    font-family: 'Baloo 2', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

.cartoon-body {
    font-family: 'Patrick Hand', 'Comic Sans MS', cursive, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* Rounded sans-serif, thin-to-medium weight (e.g. for "My Adventure Map") */
.rounded-sans-body {
    font-family: 'Nunito', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 400;
}

/* Cartoonish rounded – Quicksand (medium weight for “My Adventure Map”) */
.cartoon-thin {
    font-family: 'Quicksand', 'Comfortaa', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 600;
}

/* PIN numbers: Patrick Hand (rounded, slightly irregular strokes, no serifs) */
.pin-digits {
    font-family: 'Patrick Hand', 'Comic Sans MS', cursive, system-ui, sans-serif;
    font-variant-numeric: tabular-nums;
}

input:focus {
    outline: none;
    box-shadow: none;
}

/* Remove black/square focus border on wooden nav tab buttons */
.main-nav .wood-tab-btn,
.main-nav .wood-tab-btn:hover,
.main-nav .wood-tab-btn:focus,
.main-nav .wood-tab-btn:focus-visible,
.main-nav .wood-tab-btn:active {
    outline: none !important;
    outline-width: 0 !important;
    outline-style: none !important;
    outline-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    -webkit-tap-highlight-color: transparent !important;
    /* Tailwind ring – force off */
    --tw-ring-shadow: 0 0 #0000 !important;
    --tw-ring-offset-width: 0px !important;
    --tw-ring-offset-color: transparent !important;
}
.main-nav .wood-tab-btn * {
    outline: none !important;
    box-shadow: none !important;
}

.cartoon-underline {
    border-bottom: 2px solid rgba(75, 51, 24, 0.6) !important;
    border-top: none !important;
    border-left: none !important;
    border-right: none !important;
    background-image: url("data:image/svg+xml,%3Csvg width='200' height='4' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,2 Q20,0 40,2 T80,2 T120,2 T160,2 T200,2' stroke='%234b3318' stroke-width='2' fill='none' opacity='0.6'/%3E%3C/svg%3E");
    background-position: bottom center;
    background-repeat: no-repeat;
    background-size: 100% 3px;
    padding-bottom: 4px;
}

/* Slide down on load (for nav tabs) */
@keyframes slide-down-in {
    0% { transform: translateY(-100%); }
    100% { transform: translateY(0); }
}
.animate-slide-down-in {
    animation: slide-down-in 0.6s ease-out forwards;
}

/* Slide up when element appears (e.g. wooden sign from menu click) */
@keyframes slide-up-in {
    0% { transform: translateY(100%); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
}
.animate-slide-up-in {
    animation: slide-up-in 0.5s ease-out forwards;
}

/* Slide up then bounce: slide up first, then bounce-in effect after (solid, no fade) */
@keyframes slide-up-then-bounce {
    0% { transform: translateY(100%); }
    50% { transform: translateY(0); }
    65% { transform: translateY(0) scale(1.06); }
    80% { transform: translateY(0) scale(0.98); }
    100% { transform: translateY(0) scale(1); }
}
.animate-slide-up-then-bounce {
    animation: slide-up-then-bounce 0.9s ease-out forwards;
}

/* Slide down when element disappears (solid, no fade) */
@keyframes slide-down-out {
    0% { transform: translateY(0); }
    100% { transform: translateY(100%); }
}
.animate-slide-down-out {
    animation: slide-down-out 0.4s ease-in forwards;
}

/* Fade in after slide-down (for nav tab content) – content stays hidden until slide ends */
@keyframes fade-in-after-slide {
    0% { opacity: 0; visibility: visible; }
    100% { opacity: 1; visibility: visible; }
}
.animate-fade-in-after-slide {
    opacity: 0;
    visibility: hidden;
    animation: fade-in-after-slide 0.5s ease-out 0.6s forwards;
}

/* Bounce-in when element appears */
@keyframes bounce-in {
    0% { transform: scale(0.3); opacity: 0; }
    50% { transform: scale(1.08); }
    70% { transform: scale(0.92); }
    100% { transform: scale(1); opacity: 1; }
}
.animate-bounce-in {
    animation: bounce-in 0.5s ease-out forwards;
}

/* Bounce-out when element disappears – opacity to 0 by 45% */
@keyframes bounce-out {
    0% { transform: scale(1); opacity: 1; }
    45% { transform: scale(1.06); opacity: 0; }
    50% { transform: scale(0.92); opacity: 0; }
    100% { transform: scale(0.3); opacity: 0; }
}
.animate-bounce-out {
    animation: bounce-out 0.25s ease-in forwards;
}

/* First star turns gold: pop-in when unlocking (hero achievement) */
@keyframes star-unlock {
    0% { transform: scale(0.4); opacity: 0; }
    60% { transform: scale(1.12); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}
.animate-star-unlock {
    animation: star-unlock 0.45s ease-out forwards;
}

/* Blinking glow: pulses by default, steady on parent hover */
@keyframes glow-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.75; }
}
.animate-glow-blink {
    animation: glow-blink 1.2s ease-in-out infinite;
}

.cartoon-underline-black {
    border-bottom: 2px solid rgba(0, 0, 0, 0.8) !important;
    border-top: none !important;
    border-left: none !important;
    border-right: none !important;
    background-image: url("data:image/svg+xml,%3Csvg width='200' height='4' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,2 Q20,0 40,2 T80,2 T120,2 T160,2 T200,2' stroke='%23000' stroke-width='2' fill='none' opacity='0.9'/%3E%3C/svg%3E");
    background-position: bottom center;
    background-repeat: no-repeat;
    background-size: 100% 3px;
    padding-bottom: 4px;
}

/* Gentle and strong book/title shaking in prologue2 attic */
@keyframes tilt-n-move-shaking {
    0% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(5px, 5px) rotate(5deg); }
    50% { transform: translate(0, 0) rotate(0deg); }
    75% { transform: translate(-5px, 5px) rotate(-5deg); }
    100% { transform: translate(0, 0) rotate(0deg); }
}
.gentle-tilt-move-shake {
    animation: tilt-n-move-shaking 0.25s infinite;
}
.strong-tilt-move-shake {
    animation: tilt-n-move-shaking 0.15s infinite;
}

@keyframes white-fade-in {
    0% { opacity: 0; }
    100% { opacity: 1; }
}
.white-fade-in {
    animation: white-fade-in 0.8s ease-out forwards;
}

/* Slow scale-up used while the book is shaking in prologue2 attic */
@keyframes scale-up-slow {
    0% { transform: scale(1); }
    100% { transform: scale(1.15); }
}
.scale-up-slow {
    animation: scale-up-slow 5s ease-out forwards;
}

@keyframes fade-in-soft {
    0% { opacity: 0; }
    100% { opacity: 1; }
}
.fade-in-soft {
    animation: fade-in-soft 0.6s ease-out forwards;
}

/* Fade out black overlay */
@keyframes fade-out-black {
    0% { opacity: 1; }
    100% { opacity: 0; }
}
.fade-out-black {
    animation: fade-out-black 0.6s ease-out forwards;
}
.fade-in-slow {
    animation: fade-in-soft 2s ease-out forwards;
}
.fade-in-slower {
    animation: fade-in-soft 4s ease-out forwards;
}

/* Star fade-in: slow opacity 0 to 1, then yellow glow */
@keyframes star-fade-in {
    0% { opacity: 0; }
    100% { opacity: 1; }
}
.star-fade-in {
    animation: star-fade-in 5s ease-out forwards, yellow-blink-glow 1.5s ease-in-out infinite;
}

/* Falling down animation for Leo in Chapter 1 intro */
@keyframes fall-down {
    0% {
        transform: translate(-50%, -100%) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, 100vh) rotate(15deg);
        opacity: 0.8;
    }
}
.fall-down {
    animation: fall-down 2s ease-in forwards;
}

/* Falling from top left to lower left for Kingdom1 */
@keyframes fall-down-left {
    0% {
        transform: translate(0, -100%) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translate(0, calc(100vh - 580px)) rotate(10deg);
        opacity: 1;
    }
}
.fall-down-left {
    animation: fall-down-left 2.5s ease-out forwards;
}

/* Subtle white blinking glow for interactive items */
@keyframes subtle-white-glow {
    0%, 100% {
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.4)) drop-shadow(0 0 12px rgba(255, 255, 255, 0.2));
    }
    50% {
        filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.6)) drop-shadow(0 0 18px rgba(255, 255, 255, 0.3));
    }
}
.subtle-white-glow {
    animation: subtle-white-glow 2s ease-in-out infinite;
}

/* Shake animation for wrong drop */
@keyframes shake-wrong {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
    20%, 40%, 60%, 80% { transform: translateX(8px); }
}
.shake-wrong {
    animation: shake-wrong 0.5s ease-in-out;
}

/* Red blinking glow for wrong drop */
@keyframes red-blink-glow {
    0%, 100% {
        filter: drop-shadow(0 0 12px rgba(239, 68, 68, 0.6)) drop-shadow(0 0 18px rgba(239, 68, 68, 0.4));
    }
    50% {
        filter: drop-shadow(0 0 16px rgba(239, 68, 68, 0.8)) drop-shadow(0 0 24px rgba(239, 68, 68, 0.6));
    }
}
.red-blink-glow {
    animation: red-blink-glow 1s ease-in-out infinite;
}

/* Yellow blinking glow for crown */
@keyframes yellow-blink-glow {
    0%, 100% {
        filter: drop-shadow(0 0 16px rgba(234, 179, 8, 0.8)) drop-shadow(0 0 24px rgba(250, 204, 21, 0.6)) drop-shadow(0 0 32px rgba(253, 224, 71, 0.4));
    }
    50% {
        filter: drop-shadow(0 0 24px rgba(234, 179, 8, 1)) drop-shadow(0 0 36px rgba(250, 204, 21, 0.9)) drop-shadow(0 0 48px rgba(253, 224, 71, 0.7));
    }
}
.yellow-blink-glow {
    animation: yellow-blink-glow 1.5s ease-in-out infinite;
}

/* White blinking glow for correctly placed items */
@keyframes white-blink-glow {
    0%, 100% {
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3)) drop-shadow(0 0 12px rgba(255, 255, 255, 0.2)) drop-shadow(0 0 16px rgba(255, 255, 255, 0.1));
    }
    50% {
        filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.5)) drop-shadow(0 0 18px rgba(255, 255, 255, 0.4)) drop-shadow(0 0 24px rgba(255, 255, 255, 0.3));
    }
}
.white-blink-glow {
    animation: white-blink-glow 2s ease-in-out infinite;
}

/* Star spin/rotation when tapped (KingdomComplete) */
@keyframes star-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
.star-spin {
    animation: star-spin 0.7s ease-out forwards;
    display: inline-block; /* needed so transform applies correctly */
}

/* Grey star slowly turns yellow (KingdomCompleteStar) */
@keyframes star-grey-to-yellow {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

/* Stronger yellow glow for star progress (more visible) */
@keyframes yellow-blink-glow-strong {
    0%, 100% {
        filter: drop-shadow(0 0 20px rgba(234, 179, 8, 1)) drop-shadow(0 0 36px rgba(250, 204, 21, 0.9)) drop-shadow(0 0 48px rgba(253, 224, 71, 0.7));
    }
    50% {
        filter: drop-shadow(0 0 32px rgba(234, 179, 8, 1)) drop-shadow(0 0 48px rgba(250, 204, 21, 1)) drop-shadow(0 0 64px rgba(253, 224, 71, 0.9));
    }
}

/* Combined: fade-in + strong glow (both animations run together) */
.star-grey-to-yellow-with-glow {
    animation: star-grey-to-yellow 3s ease-out forwards, yellow-blink-glow-strong 1.2s ease-in-out infinite;
}

/* Star hover: pop effect (grey stars) */
.star-hover-pop {
    transition: transform 0.3s ease;
}
.star-hover-pop:hover {
    transform: scale(1.25);
}

/* Star hover: pop + rotate (yellow star) */
.star-hover-pop-rotate {
    transition: transform 0.3s ease;
}
.star-hover-pop-rotate:hover {
    transform: scale(1.25) rotate(15deg);
}
